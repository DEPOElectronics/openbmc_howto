# Добавить параметры ядра
Для добавления поддержкой различных поддерживаемых датчиков надо

1.	Создать файл `recipes-kernel/linux/linux-aspeed/{MACHINE}.cfg`
2.	В файл записать нужный конфиг. Например `CONFIG_PMBUS=y` 
3.	Добавить этот файл в `linux-aspeed_%.bbappend` уровнем выше в раздел `SRC_URI`
## Модуля ядра
[Драйверы](drivers/README) могут быть добавлены в ядро 2 способами: статическим и в качестве отдельного модуля ядра. По-умолчанию все модули добавляются статически. Но при разработке своих модулей вне ядра это неудобно, поэтому свои драйверы я добавляю как модули. Для этого надо
	1) Включить поддержку модулей в ядро
```
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
```
	2)В рецепте драйвера (или где-то в конфиге) указать что модуль требует автозагрузки
```
KERNEL_MODULE_AUTOLOAD += "post_disp"
```
	3) Включить автозагрузку в SystemD для этого по адресу `recipes-core/systemd/systemd_%.bbappend` дописать
```
PACKAGECONFIG:append = " kmod"
```
По умолчанию модули располагаются   по пути: `usr/lib/modules/{kernel}/updates/`
# Просмотр параметров ядра
Посмотреть параметры ядра внутри BMC `zcat /proc/config.gz`