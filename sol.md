# Serial on LAN (SOL)

За SOL отвечает программа репозиторий [obmc-console](https://github.com/openbmc/obmc-console). Программа делится на серверную и клиентскую часть.
# Сервер
Для работы сервера необходимо указать конфигурационный файл и [консоль](./console)
`obmc-console-server -c /etc/obmc-console/server.ttyS1.conf /dev/ttyS1`
В зависимости от типа консоли настройки включают в себя:
* **console-id = host** имя сервера, нужно для подключения к нему клиента.
* local-tty = ttyS0 - имя консоли
* local-tty-baud = 115200 частота
* lpc-address = 0x3f8 адрес на шине LPC
* sirq = 4 прерывание на шине LPC
В общем случае серверов может быть несколько (по количеству значимых консолей)
# Клиент
Для работы клиента тоже нужен конфигурационный файл, в случае если он не указан, то настройки будут браться из `/etc/obmc-console.conf`
# Bitbake
## Выбор консоли по-умолчанию для сервера
По умолчанию используется виртуальная консоль `OBMC_CONSOLE_HOST_TTY ?= "ttyVUART0"` В случае использования другой, необходимо в явном виде её указать
## Systemd запуск сервера
Запуск сервера осуществляется с помощью правила udev 80-obmc-console-uart.rules. По умолчанию в нем прописаны uart1..uart4. В случае использования другого uart или несовпадения адресов  uart, правило надо изменить
# Статус соединения в Web-интерфейсе
Корректный статус будет работать только после того как настроить статус питания хоста